<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Payment Demo</title>


    <script src="/scripts/libs/bower_components/angular/angular.min.js" type="application/javascript"></script>
    <script src="/scripts/libs/bower_components/ngstorage/ngStorage.min.js" type="application/javascript"></script>
    <script src="/scripts/libs/bower_components/angular-route/angular-route.min.js" type="application/javascript"></script>
    <script src="/scripts/libs/bower_components/angular-cookies/angular-cookies.min.js" type="application/javascript"></script>
    <script src="/scripts/libs/bower_components/angular-ui-router/release/angular-ui-router.min.js" type="application/javascript"></script>
    <script src="/scripts/libs/bower_components/angular-resource/angular-resource.min.js" type="application/javascript"></script>

    <script src="/scripts/app.js" type="application/javascript"></script>
    <script src="/scripts/controllers/loginPageController.js" type="application/javascript"></script>

    <!-- Bootstrap dependencies -->

    <script src="/scripts/libs/bower_components/angular-bootstrap/ui-bootstrap.min.js" type="application/javascript"></script>
    <script src="/scripts/libs/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js" type="application/javascript"></script>
    <link rel="stylesheet" href="/scripts/libs/bower_components/angular-bootstrap/ui-bootstrap-csp.css">
    <link rel="stylesheet" href="/scripts/libs/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/scripts/libs/bower_components/bootstrap/dist/css/bootstrap-theme.min.css">

</head>

<body ng-app="myApp" ng-controller="HomeController as homeCtrl" >

<div class="page-header">
    <h1 translate>Home</h1>
</div>
<div style="text-align: center">
    <b ng-show="$storage.principal">
        <h1>
            {{$storage.principal.principal.username}} Credit Cards
        </h1>

        <table ng-cloak class="data-table table table-bordered table-hover" cellspacing="0">
            <thead class="ui-widget-header">
            <th>Credit Card Number</th>
            <th>Credit Card Type</th>
            <th>Expiry Date</th>
            </thead>
            <tbody>
            <tr ng-repeat="creditcard in model.ccdetails">
                <td>
                    <button class="btn btn-default"  ng-click="edit(creditcard)"
                            tooltip-placement="left" tooltip="Edit" >
                        <span class="glyphicon glyphicon-edit"></span>
                    </button>
                </td>
                <td>{{creditcard.ccNumber}}</td>
                <td>{{creditcard.ccType}}</td>
                <td>{{creditcard.expiryDate}}</td>
            </tr>
            </tbody>
        </table>
        <button ng-click="create()" class="btn btn-default"><span class="glyphicon glyphicon-plus"></span> <span>Add Credit Card</span>
        </button>

        <h1>Add Credit Card</h1>
        <h4 style="color:red">{{errorMsg}}</h4>
        <form id="ccEditForm" name="ccEditForm" ng-submit="save()" autocomplete="false">
            <input type="hidden" name="id" ng-model="ccEditForm.id">
            <div class="modal-body" ng-show="ccEditForm">
                <div class="form-group" ng-hide="ccEditForm.id">
                    <label for="ccNumberInput">Credit Card Number</label>
                    <input type="text" class="form-control" id="ccNumberInput" ng-model="ccEditForm.ccNumber">
                    <div field-validation-error-place-holder error="errors.fieldErrors.ccNumber"></div>
                </div>

                <div class="form-group">
                    <label for="ccTypeInput">Credit Card Type</label>
                    <input type="text"  class="form-control" id="ccTypeInput" ng-model="ccEditForm.ccType">
                    <div field-validation-error-place-holder error="errors.fieldErrors.ccType"></div>
                </div>

                <div class="form-group">
                    <label for="expDateInput">Expiry Date</label>
                    <input type="text"  class="form-control" id="expDateInput" ng-model="ccEditForm.expDate">
                    <div field-validation-error-place-holder error="errors.fieldErrors.expDate"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="saveCreditCard()">Add Credit Card</button>
                <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
            </div>
        </form>
    </b>
    <b ng-show="!$storage.principal">
        Unauthorised Access
    </b>
</div>
</body>